{% extends "base.html" %}

{% block main_body %}
<main class="site-main">
  <!-- Hero/intro bubble -->
  <section class="bubble bubble-lg bubble-accent-navy reveal" style="margin-bottom:1rem;">
    <h1 class="section-title" style="color:#e8f3fb">{{ content.title or "Contact Me" }}</h1>
    {% if content.subtitle %}
      <p class="section-subtitle">{{ content.subtitle }}</p>
    {% endif %}
  </section>

  <!-- Form bubble -->
  <section class="bubble bubble-lg reveal" style="max-width: 860px; margin: 0 auto;">
    <form
      class="form-grid"
      method="post"
      action="/api/contact_me"
      hx-post="/api/contact_me"
      hx-target="#contact-status"
      hx-swap="innerHTML"
    >
      <div class="form-row">
        <label for="name" class="form-label">Name</label>
        <input id="name" name="name" type="text" required class="input">
      </div>

      <div class="form-row">
        <label for="email" class="form-label">Email</label>
        <input id="email" name="email" type="email" required class="input">
      </div>

      <div class="form-row form-row-full">
        <label for="message" class="form-label">Message</label>
        <textarea id="message" name="message" rows="6" required class="textarea"></textarea>
      </div>

      <div class="form-row form-row-inline">
        <label class="checkbox">
          <input type="checkbox" name="requested_transcript">
          <span>Request my transcript</span>
        </label>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn">Send</button>
        <div id="contact-status" class="status" aria-live="polite"></div>
      </div>
    </form>
  </section>

  <script>
    // Slow, staggered reveal like the other pages
    document.addEventListener("DOMContentLoaded", () => {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry, i) => {
          if (entry.isIntersecting) {
            setTimeout(() => entry.target.classList.add("in-view"), i * 150);
          }
        });
      }, { threshold: 0.1, rootMargin: "0px 0px -10% 0px" });

      document.querySelectorAll(".reveal").forEach(el => observer.observe(el));
    });
  </script>
</main>
{% endblock %}
